/**
*
* AjaxListener.js: listen to any AJAX event on page, even by other scripts
* version 1.0.0
* https://github.com/foo123/AjaxListener.js
*
**/
!function(e,n){"use strict";e[n]=function(){"use strict";var o={VERSION:"1.0.0"},s=[],t=false,e=window.fetch,n=window.XMLHttpRequest,r,u;function i(t){for(var e=s.slice(),n=0,o=e.length;n<o;++n)e[n](t)}return o.install=function(){return t||(t=!0,e&&(window.fetch=function(n,t){var o={type:"fetch",method:"GET",url:n,data:null,status:0,response:"",options:t};return e(n,t).then(function(e){return s.length&&e.text().then(function(t){o.status=e.status,o.response=t,n instanceof window.Request?(o.method=n.method.toUpperCase(),o.url=n.url,"POST"===o.method?n.text().then(function(t){o.data=t,i(o)}):i(o)):i(o)}),e})}),n&&(r=n.prototype.open,u=n.prototype.send,n.prototype.open=function(t,e){var n=this,o={type:"xhr",method:"GET",url:"",data:null,status:0,response:""};arguments.length<1&&(t="GET"),arguments.length<2&&(e=""),o.method=String(t).toUpperCase(),o.url=e,n.__=o,n.addEventListener("load",function t(){n.removeEventListener("load",t),n.__=null,o.status=n.status,o.response=n.responseText,s.length&&i(o)}),r.apply(n,arguments)},n.prototype.send=function(t){var e=this.__||{};arguments.length<1&&(t=""),"POST"===e.method&&(e.data=t),u.apply(this,arguments)})),o},o.isInstalled=function(){return t},o.uninstall=function(){return t&&(e&&(window.fetch=e),n&&(n.prototype.open=r,n.prototype.send=u),u=r=null,t=!1),o},o.onRequest=function(t,e){var n;return"function"==typeof t&&(n=s.indexOf(t),!1===e?-1!==n&&s.splice(n,1):-1===n&&s.push(t)),o},o}(),"function"==typeof define&&define.amd&&define(function(t){return e[n]})}("undefined"!=typeof self?self:this,"AjaxListener");